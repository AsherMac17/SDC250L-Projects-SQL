--- Asher Macdonald Q1 ---
ALTER TABLE productlist
ADD (
    price        NUMBER(10,2),
    description  VARCHAR2(4000)
);

UPDATE productlist p
SET p.price = (
    SELECT s.price
    FROM storefront s
    WHERE s.productcode = p.productcode
)
WHERE EXISTS (
    SELECT 1
    FROM storefront s
    WHERE s.productcode = p.productcode
);

DROP TABLE storefront;

--- Asher Macdonald Q2 ---
CREATE TABLE CHATLOG
             (CHATID NUMBER(3),
              RECEIVERID NUMBER(3),
              SENDERID NUMBER(3),
              DATESENT DATE,
              CONTENT VARCHAR2(250),
CONSTRAINT PK_CHATLOG PRIMARY KEY (CHATID),
CONSTRAINT FK_CHATLOG_RECEIVER FOREIGN KEY (RECEIVERID) REFERENCES USERBASE (USERID),
CONSTRAINT FK_CHATLOG_SENDER FOREIGN KEY (SENDERID) REFERENCES USERBASE (USERID));

INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (1, 102, 101, DATE '2025-01-01', 'Hey, how are you?');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (2, 101, 102, DATE '2025-01-01', 'I am good! How about you?');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (3, 103, 101, DATE '2025-01-02', 'Are we still meeting today?');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (4, 101, 103, DATE '2025-01-02', 'Yes, see you at 3 PM.');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (5, 104, 102, DATE '2025-01-03', 'Did you finish the report?');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (6, 102, 104, DATE '2025-01-03', 'Almost done, sending it soon.');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (7, 105, 103, DATE '2025-01-04', 'Happy birthday!');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (8, 103, 105, DATE '2025-01-04', 'Thank you so much!');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (9, 104, 101, DATE '2025-01-05', 'Can you review my code?');
INSERT INTO CHATLOG (CHATID, RECEIVERID, SENDERID, DATESENT, CONTENT)
VALUES (10, 101, 104, DATE '2025-01-05', 'Sure, I will look at it later today.');

--- Asher Macdonald Q3 ---
CREATE TABLE FRIENDSLIST
    (USERID   NUMBER(3),
    FRIENDID NUMBER(3),
CONSTRAINT PK_FRIENDSLIST PRIMARY KEY (USERID, FRIENDID),
CONSTRAINT FK_FRIENDSLIST_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),
CONSTRAINT FK_FRIENDSLIST_FRIEND FOREIGN KEY (FRIENDID) REFERENCES USERBASE (USERID));

INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (101, 102);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (101, 103);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (102, 101);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (102, 104);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (103, 101);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (103, 105);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (104, 102);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (104, 105);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (105, 103);
INSERT INTO FRIENDSLIST (USERID, FRIENDID) VALUES (105, 104);

--- Asher Macdonald Q4---
Create table WISHLIST
    (USERID NUMBER(3),
    PRODUCTCODE VARCHAR2(5),
    POSITION NUMBER(3),
CONSTRAINT PK_WISHLIST PRIMARY KEY (USERID, PRODUCTCODE),
CONSTRAINT FK_WISHLIST_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID),     
CONSTRAINT FK_WISHLIST_PRODUCT FOREIGN KEY (PRODUCTCODE) REFERENCES PRODUCTLIST (PRODUCTCODE));

INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (101, 'GAME1', 1);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (102, 'GAME2', 2);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (103, 'GAME3', 1);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (104, 'GAME4', 2);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (105, 'GAME5', 1);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (106, 'GAME6', 2);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (107, 'GAME7', 1);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (108, 'GAME8', 2);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (109, 'GAME9', 1);
INSERT INTO WISHLIST (USERID, PRODUCTCODE, POSITION) VALUES (110, 'RPG10', 2);

---Asher Macdonald Q5---
Create table USERPROFILE
    (USERID NUMBER(3),
    IMAGEFILE VARCHAR2(250),
    DESCRIPTION VARCHAR2(250),
CONSTRAINT PK_USERPROFILE PRIMARY KEY (USERID),
CONSTRAINT FK_USERPROFILE_USER FOREIGN KEY (USERID) REFERENCES USERBASE (USERID));

INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (101, 'alice.jpg', 'Alice loves reading and hiking.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (102, 'bob.png', 'Bob is a tech enthusiast and gamer.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (103, 'carol.jpg', 'Carol enjoys photography and painting.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (104, 'dave.png', 'Dave is a foodie and travel blogger.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (105, 'eve.jpg', 'Eve loves yoga and meditation.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (106, 'frank.png', 'Frank is a software developer.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (107, 'grace.jpg', 'Grace enjoys music and gardening.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (108, 'heidi.png', 'Heidi is a fitness trainer.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (109, 'ivan.jpg', 'Ivan is passionate about sports.');
INSERT INTO USERPROFILE (USERID, IMAGEFILE, DESCRIPTION) 
VALUES (110, 'judy.png', 'Judy loves movies and writing.');
    
--- Asher Macdonald Q6---
Create table SECURITYQUESTION
                (QUESTIONID NUMBER,
                USERID NUMBER(3),
                QUESTION VARCHAR2(250),
                ANSWER VARCHAR2(250),
CONSTRAINT PK_Sec_Question Primary Key (QUESTIONID),
CONSTRAINT FK_Sec_UserBase FOREIGN KEY (UserID) REFERENCES UserBase (UserID));

INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(1, 101, 'What is the name of your first pet?', 'Buddy');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(2, 101, 'What city were you born in?', 'Chicago');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(3, 102, 'What is your mother''s maiden name?', 'Smith');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(4, 102, 'What was the name of your elementary school?', 'Lincoln Elementary');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(5, 103, 'What is your favorite food?', 'Pizza');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(6, 103, 'What was your first car?', 'Toyota Corolla');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(7, 104, 'What is the name of your best childhood friend?', 'Alex');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(8, 104, 'What street did you grow up on?', 'Maple Street');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(9, 105, 'What is your favorite color?', 'Blue');
INSERT INTO SECURITYQUESTION (QUESTIONID, USERID, QUESTION, ANSWER) VALUES
(10, 105, 'What was the name of your first teacher?', 'Mrs. Johnson');

--- Asher Macdonald Q7 ---
Create Table COMMUNITYRULES
                (RULENUM NUMBER (3),
                TITLE VARCHAR2(250),
                DESCRIPTION VARCHAR2(250),
                SEVERITYPOINT NUMBER(4),
CONSTRAINT PK_COMMUNITYRULES PRIMARY KEY (RULENUM));

INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (1, 'No Hate Speech', 'Hate speech or discriminatory language is not allowed.', 50);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (2, 'No Harassment', 'Harassing or bullying other users is prohibited.', 40);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (3, 'No Spam', 'Spamming messages or advertisements is not permitted.', 20);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (4, 'No Explicit Content', 'Posting explicit or adult content is not allowed.', 45);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (5, 'Respect Privacy', 'Sharing private or personal information is prohibited.', 35);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (6, 'No Impersonation', 'Impersonating other users or entities is not allowed.', 30);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (7, 'No Threats', 'Threats of violence or harm toward others are prohibited.', 50);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (8, 'Appropriate Language', 'Use respectful and appropriate language at all times.', 15);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (9, 'No Misinformation', 'Knowingly spreading false information is not allowed.', 25);
INSERT INTO COMMUNITYRULES (RULENUM, TITLE, DESCRIPTION, SEVERITYPOINT)
VALUES (10, 'Follow Moderator Instructions', 'Users must comply with moderator decisions.', 10);

---Asher Macdonald Q8 ---
Create Table INFRACTIONS
    (INFRACTIONID NUMBER,
    USERID NUMBER(3),
    RULENUM NUMBER(3),
    DATEASSIGNED DATE,
    PENALTY VARCHAR2(250),
CONSTRAINT PK_Infraction PRIMARY KEY (InfractionID),
CONSTRAINT FK_Infraction_User FOREIGN KEY (UserID) REFERENCES UserBase(UserID),
CONSTRAINT FK_Infraction_Comm FOREIGN KEY (RuleNum) REFERENCES COMMUNITYRULES(RuleNum));

INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (1, 101, 1, DATE '2025-01-01', 'Warning issued for hate speech.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (2, 102, 3, DATE '2025-01-02', 'Account muted for 24 hours due to spam.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (3, 103, 2, DATE '2025-01-03', 'Temporary suspension for harassment.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (4, 104, 4, DATE '2025-01-04', 'Explicit content removed warning issued.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (5, 105, 5, DATE '2025-01-05', 'Private information deleted; warning sent.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (6, 101, 6, DATE '2025-01-06', 'Account flagged for impersonation; warning issued.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (7, 102, 7, DATE '2025-01-07', 'User temporarily suspended for threats.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (8, 103, 9, DATE '2025-01-08', 'Misinformation post removed; warning sent.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (9, 104, 8, DATE '2025-01-09', 'Inappropriate language flagged warning issued.');
INSERT INTO INFRACTIONS (INFRACTIONID, USERID, RULENUM, DATEASSIGNED, PENALTY)
VALUES (10, 105, 10, DATE '2025-01-10', 'Moderation instructions ignored account restricted.');

---Asher Macdonald Q9 ---
Create table USERSUPPORT
    (TICKETID NUMBER,
    EMAIL VARCHAR2(250),
    ISSUE VARCHAR2(250),
    DATESUBMITTED DATE,
    DATEUPDATED DATE,
    STATUS VARCHAR2(250),
CONSTRAINT PK_UserSupport PRIMARY KEY (TICKETID));

INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (1, 'alice@example.com', 'Cannot reset password', DATE '2025-01-01', DATE '2025-01-02', 'Open');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (2, 'bob@example.com', 'App crashes on login', DATE '2025-01-01', DATE '2025-01-03', 'IN PROGRESS');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (3, 'carol@example.com', 'Payment not processed', DATE '2025-01-02', DATE '2025-01-04', 'Resolved');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (4, 'dave@example.com', 'Cannot upload profile picture', DATE '2025-01-02', DATE '2025-01-05', 'Open');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (5, 'eve@example.com', 'Notification emails not received', DATE '2025-01-03', DATE '2025-01-06', 'IN PROGRESS');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (6, 'frank@example.com', 'Account locked', DATE '2025-01-03', DATE '2025-01-07', 'Resolved');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (7, 'grace@example.com', 'Unable to change password', DATE '2025-01-04', DATE '2025-01-08', 'NEW');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (8, 'heidi@example.com', 'Error 404 on dashboard', DATE '2025-01-04', DATE '2025-01-09', 'IN PROGRESS');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (9, 'ivan@example.com', 'Cannot link social media account', DATE '2025-01-05', DATE '2025-01-10', 'Resolved');
INSERT INTO USERSUPPORT (TICKETID, EMAIL, ISSUE, DATESUBMITTED, DATEUPDATED, STATUS)
VALUES (10, 'judy@example.com', 'App notifications delayed', DATE '2025-01-05', DATE '2025-01-11', 'NEW');

---Asher Macdonald Q10 ---
Create or replace view Security_Qtn_VW
as (select distinct QUESTION
    from SECURITYQUESTION);

Create or replace view Ticket_IP_New_Vw 
as select TICKETID, EMAIL, ISSUE, DATEUPDATED
    from USERSUPPORT
    where status in ('NEW', 'IN PROGRESS')
    order by DATEUPDATED;

